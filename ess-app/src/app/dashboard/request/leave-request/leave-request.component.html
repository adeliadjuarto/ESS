<div class="pending-msg" *ngIf="pendingRequests > 0 && !requestConfirm">
  <span>Terdapat {{pendingRequests}} request yang belum terkirim</span>
</div>

<div class="container" *ngIf="!requestConfirm">
    <mat-form-field>
      <mat-select placeholder="Tipe Pengajuan" [(ngModel)]="selectedLeaveType" name="leaveType" (change)="toggleLeaveType()">
        <mat-option *ngFor = "let type of leaveTypes" [value]="type">
            {{type.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <input #nameInput matInput placeholder="Judul" [(ngModel)]="request.title"/>
    </mat-form-field>

    <mat-form-field>
      <input #nameInput matInput placeholder="Keterangan" [(ngModel)]="request.description"/>
    </mat-form-field>

    <div class="from-to-datepicker" *ngIf="!singleDatepicker">
      <mat-form-field id="datepicker-left">
        <input name="dateFor" matInput placeholder="Dari" [(ngModel)]="request.from"
               [matDatepicker]="pickerFor" (click)="pickerFor.open()"/>
        <mat-datepicker-toggle matSuffix [for]="pickerFor"></mat-datepicker-toggle>
        <mat-datepicker #pickerFor></mat-datepicker>
      </mat-form-field>
      <mat-form-field id="datepicker-right">
        <input name="dateTo" matInput placeholder="Sampai" [(ngModel)]="request.to"
               [matDatepicker]="pickerTo" (click)="pickerTo.open()" />
        <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
        <mat-datepicker #pickerTo></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="single-datepicker" *ngIf="singleDatepicker">

      <mat-form-field>
        <input matInput placeholder="Pilih Tanggal" [(ngModel)]="request.from"
               [matDatepicker]="picker" (click)="picker.open()" />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <nouislider name="slider" [config]="sliderConfig" [(ngModel)]="sliderValue"></nouislider>
    
    </div>

    <div class="input-file">
      <label for="file-input">Upload bukti (opsional)</label>
      <input #fileInput id="file-input" hidden type="file" (change)="fileChange($event)" placeholder="Upload bukti (opsional)">
      <div  class="file-attach">
      <button mat-fab>
        <mat-icon (click)="fileInput.click()">add</mat-icon>
      </button>
      <span>{{fileName}}</span>
      </div>
    </div>

    <div class="buttons">
      <button mat-raised-button (click)="confirmRequest()">Submit Pengajuan Request</button>
    </div>
</div>

<div class="container" *ngIf="requestConfirm">
    <mat-card>  
      <mat-card-content>
        <div class="status">
          <div class="status-title">
            Judul
          </div>
          <div class="status-item">
            {{request.title}}
          </div>
        </div>
      </mat-card-content>
      <mat-card-content>
        <div class="status">
          <div class="status-title">
            Keterangan
          </div>
          <div class="status-item">
            {{request.description}}
          </div>
        </div>
      </mat-card-content>
      <mat-card-content>
        <div class="status">
          <div class="status-title">
            Tipe
          </div>
          <div class="status-item">
            {{selectedLeaveType.name}}
          </div>
        </div>
      </mat-card-content>
      <mat-card-content *ngIf="request.from">
        <div class="status">
          <div class="status-title">
            Dari
          </div>
          <div class="status-item">
            {{request.from | dateFormat}}
          </div>
        </div>
      </mat-card-content>
      <mat-card-content *ngIf="request.to">
        <div class="status">
          <div class="status-title">
            Sampai
          </div>
          <div class="status-item">
            {{request.to | dateFormat}}
          </div>
        </div>
      </mat-card-content>
      <mat-card-content *ngIf="request.attachments">
        <div class="status">
          <div class="status-title">
            File Attachment
          </div>
          <div class="status-item">
            {{request.attachments.name}}
          </div>
        </div>
      </mat-card-content>
      <mat-card-content>
        <div class="buttons">
          <button mat-raised-button (click)="submitRequest()">Confirm</button>
          <button mat-raised-button (click)="confirmRequest()">Cancel</button>
        </div>
      </mat-card-content>
    </mat-card>

</div>